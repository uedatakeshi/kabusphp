# kabusphp
## auカブコム証券のkabuステーションAPIを叩いて自動売買するためのphpソース

## How to install.

- 上場銘柄のリストはこちらからダウンロードして、コードだけのcsvにしておく。code.csv

https://kabusapo.com/stock-data/stock-list/

- db.sql を元にデータベースを作成しておく。こちらはpostgresだがmysqlでも問題ない。
- テーブルは2つだけで、symbolsは上場全銘柄のデータ保存し、対象リストの絞り込みに使う。
- itemsは実際に売買に用いるテーブルで、巡回した時間の株価データが保存される。
- まず、週一回程度、上場全銘柄のデータを集めるので、 php ./auto.php を実行する。kabuステーションを実行してから実行すること。
- 3400件くらいだが、半日くらいかかる。
- これで前日の株価と出来高がDBに入るのでそれを元に対象リストを絞り込む。

- およそ100件のリストに対して巡回して価格を取得して分析するので、自分の予算に応じて100件程度に絞りこんでおく。
- 例えば残高が１０万円しかないのに、株価が1500円の銘柄のデータを取得しても意味がない。

- 株価が100円の銘柄も対象外となるだろうから、だいたい700円から1000円で出来高が30万以上、などの条件にする。
